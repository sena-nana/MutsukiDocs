---
title: novelai
order: 1
icon: creative
---
## 0.4.12
## 0.4.11_20221029
### 新功能
- 添加了novelai_pure设置，当关闭时，图片会和数据打包为合并消息发送，开启时仅会发送图片，默认关闭
    - 该设置可以通过set功能修改
- 添加了novelai_save_detail设置，当开启时，数据会单独保存为同名的txt文件，关闭时不保存，默认关闭
### 修复
- 修复重置群tag时，会将值设为None的问题
- 修复set功能value值中包含空格时无法完整解析的问题
### 更改
- 文件名不再包含tag和seed，而是统一为图片的md5值
- 屏蔽词添加bloody
## 0.4.10_20221027
### 修复
- 修复翻译无法使用的问题
### 更改
- 群设置的权限开放给superuser，同时未满足权限会中断处理流程
## 0.4.9_20221026
### 新功能
- 现在set功能可以输入参数全称
- 现在可以通过config设置novelai_uc（排除词条）
- 现在set功能可以设置uc（排除词条）
### 修复
- 修复了调取AI检定API失败时，无法正常获取异常信息的问题
- 修复了AI检定报错413的问题
- 修复了文本生图时步数被固定到50的问题，现在会正常为28
- 修复了点数计算函数，现在会将步数计入计算
- 更换了DeepdanbooruAPI，且现在的API似乎准确率更高
- 修复了输入单独词条时，空格会消失的问题
- 修复版本更新还是会重复推送的问题
### 更改
- 现在会保存为占用空间更小的jpg格式
- 回复中使用的词条现在会包含内置词条
- 现在BOT主不需要管理员权限也能够更改群设置
- 图片现在的命名不会带有hash，而是以顺序数字结尾
- 现在ai检定API会自动重试最多三次
- 现在FIFO类中包含了所有novelai参数，并将获取请求体的函数置于FIFO类中
- 对代码进行了精简和简单注释，并尝试将与novelai服务器交互部分独立
### 废弃
- 💥不再支持同时对多张图片以图生图
## 0.4.8_20221024
### 新功能
- 现在回复中会添加使用的词条
- 分群启用支持黑白名单了
    - 原有的NOVELAI_BAN改为NOVELAI_ON(bool),即全局开启/关闭
    - aidraw on逻辑与aidraw set逻辑合并，可以使用.aidraw set on True配置，同样保留了aidraw on的语法
### 修复
- 修复了在0.4.7中屏蔽词误杀的问题
- 修复了DeepL翻译引擎无法工作的问题,感谢[@pk4ever1](https://github.com/pk4ever1)帮助测试
### 更改
- 删除了检查词条内容的逻辑，允许用户使用空词条（即仅使用内置词条）
## 0.4.7_20221023
### 新功能
- 加入了DeepL翻译API（需要进一步测试和反馈）
- 打开H模式后，现在会自动切换到novelai完整模型
- 现在可以通过.aidraw set查看和设置本群的默认词条
- 点数模式现在生成大图和多图也会扣除点数了，保持和官网一致
- 加入了效果更好的谷歌代理免费翻译API，默认优先级高于有道翻译
### 修复
- 修复了在某些环境下导致aiohttp报错的问题
- 修复了.aidraw set会接受错误数据格式的问题
- 修复了点数模式下文本生图也会扣除点数的问题
- 修复了中英混合输入会导致翻译不符合预期的问题
### 更改
- 整合了以图生图和文本生图的请求逻辑
- 现在后台获取词条时将会直接显示翻译之后的词条
- 将H屏蔽词检测移至翻译之后，去除了“裸”，添加了一大堆屏蔽词，并不再将屏蔽词加入反面词条
- 将优化TAG精简至与官网一致

## 0.4.6_20221022
### 新功能
- 现在会通过AI判断生成后的图片是否nsfw，并将不同判断结果的图片存储在单独文件夹中
- 现在可以修改单群的cd
    - 在需要修改的群内使用.aidraw set cd 120将cd修改为120
    - 在群内使用.aidraw set查看本群的设置
### 修复
- 删除了启动时版本自检以解决与部分插件冲突和在Unix系统上报错的问题
- 在H屏蔽词中添加”裸“以解决中文绕过nude关键词的问题
### 更改
- 整合了以图生图和文本生图的处理逻辑
### 已知问题
- DeepdanbooruAPI寄了，查书功能暂不可用

## 0.4.5_20221020
### 新功能
- 添加了在线说明书
### 修复
- 修复了启用关闭功能无法正常使用的问题
- 修复了H控制功能无法正常生效的问题
- 修复了保存文件时没有正常创建output文件夹的问题
### 更改
- CD提醒中添加了CD剩余的秒数
- 更新推送现在推送一次后就不会再推送了